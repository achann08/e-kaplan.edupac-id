/**
 * @package
 * @subpackage organizer
 * @copyright 2020 Thomas Niedermaier (thomas.niedermaier@gmail.com)
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_organizer/printform",["jquery","core/config","core/log"],(function($,config,log){var instance=new function(){this.iconminus="",this.iconplus=""};return instance.init=function(param){instance.iconminus=param.iconminus,instance.iconplus=param.iconplus,function(){$("#print_preview").find("th").find("a[name$=_cell]").each((function(){var col=$(this).attr("name").split("_")[0],iconminus=instance.iconminus.replace("xxx",col+"_thiconminus").replace("yyy",col),iconplus=instance.iconplus.replace("xxx",col+"_thiconplus").replace("yyy",col);$(this).parent().append(iconminus).append(iconplus),$("#"+col+"_thiconplus").hide()}));var $form=$("#organizer_main_cointainer form");$('input[name="downloadfile"]').click((function(){$form.attr("target","_blank")})),$('input[name="cancel"]').click((function(){$form.attr("target","_self")}))}(),$("#print_preview").find("th").find("img[id*=_thicon]").on("click",(function(e){var hide,target=$(e.target),col=target.attr("col");-1!=target.attr("src").indexOf("minus")?(hide=!0,$("#"+col+"_thiconminus").hide(),$("#"+col+"_thiconplus").show(),$("a[name="+col+"_cell]").hide()):(hide=!1,$("#"+col+"_thiconplus").hide(),$("#"+col+"_thiconminus").show(),$("a[name="+col+"_cell]").show()),$("#print_preview").find('span[name="'+col+'_cell"]').each((function(){hide?$(this).hide():$(this).show()})),function(){var name="mod_organizer_noprintfields",values="";$("img[id$='_thiconplus']").not(":hidden").each((function(){values+=$(this).attr("col")+","}));var cfg={method:"get",url:config.wwwroot+"/lib/ajax/setuserpref.php",data:{sesskey:config.sesskey,pref:encodeURI(name),value:encodeURI(values)},dataType:"json",beforeSend:function(){log.info("set user preference "+name+": "+values,"organizer")},success:function(){log.info("set user preference OK","organizer")},error:function(){log.error("set user preference FAILED","organizer")}};$.ajax(cfg)}()})),$("#print_preview").find("th").find("a[noprint*=1]").each((function(){var col=$(this).attr("name").split("_")[0];$("#"+col+"_thiconminus").trigger("click")}))},instance}));

//# sourceMappingURL=printform.min.js.map