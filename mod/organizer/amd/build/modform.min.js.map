{"version":3,"file":"modform.min.js","sources":["../src/modform.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/.\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle. If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package\n * @subpackage organizer\n * @copyright 2020 Thomas Niedermaier (thomas.niedermaier@gmail.com)\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * In mod_form: Force selection of grouping if group mode is choosen.\n */\n\n\ndefine(\n    ['jquery'], function($) {\n\n        /**\n     * @constructor\n     * @alias module:mod_organizer/modform\n     */\n        var Modform = function() {\n            this.activateduedatecheckbox = false;\n        };\n\n        var instance = new Modform();\n\n        instance.init = function(param) {\n\n            if (param.activateduedatecheckbox) {\n                this.activateduedatecheckbox = param.activateduedatecheckbox;\n            }\n            var warningdiv = $(\"#groupingid_warning\").parent().parent();\n            warningdiv.addClass('advanced');\n            warningdiv.hide();\n\n            /**\n             * Display/Hide groupings if groupmode is selected.\n             * @param {object} e event of groupmode field\n             */\n            function check_group_members_only(e) {\n                var isgrouporganizer = $(e.target);\n\n                if (isgrouporganizer.val() == 1) {\n                    $('#id_groupmode').val('1').click();\n                    $('#fitem_id_groupingid').removeAttr('hidden');\n                    $('#fitem_id_groupingid').show();\n                    $('#fitem_id_groupingid').find().each(function() {\n                        $(this).css('display', 'block');\n                        $(this).removeAttr('hidden');\n                    });\n                    $('#id_groupingid').removeAttr('disabled');\n                    warningdiv.show();\n                } else if (isgrouporganizer.val() == 0) {\n                    $('#id_groupmode').val('0').click();\n                    $('#fitem_id_groupingid').prop('hidden', true);\n                    $('#fitem_id_groupingid').find().each(function() {\n                        $(this).css('display', 'none');\n                        $(this).prop('hidden', true);\n                    });\n                    $('#id_groupingid').prop(\"disabled\", true);\n                    warningdiv.hide();\n                }\n            }\n\n            /**\n             * Disable groupings if groupmode is deselected.\n             * @param {object} e event of groupmode field\n             */\n            function check_group_mode(e) {\n                var groupmodeselect = $(e.target);\n\n                if (groupmodeselect.val() == 0) {\n                    $('#id_isgrouporganizer').val('0');\n                    $('#fitem_id_groupingid').hide();\n                    $('#id_groupingid').prop('disabled', 'disabled');\n                    warningdiv.hide();\n                }\n            }\n\n            $('#id_isgrouporganizer').on('change', check_group_members_only);\n            $('#id_groupmode').on('change', check_group_mode);\n\n            if (this.activateduedatecheckbox && !$('.error')) {\n                $('#id_duedate_enabled').click();\n            }\n        };\n\n        instance.init_gradechange = function(param) {\n            $('input[id^=id_grade]').on(\"change\", function() {\n                alert(param.changegradewarning);\n            });\n        };\n\n            return instance;\n\n    }\n);\n"],"names":["define","$","instance","activateduedatecheckbox","init","param","warningdiv","parent","addClass","hide","on","e","isgrouporganizer","target","val","click","removeAttr","show","find","each","this","css","prop","init_gradechange","alert","changegradewarning"],"mappings":";;;;;;AA2BAA,+BACI,CAAC,WAAW,SAASC,OAUbC,SAAW,IAJD,gBACLC,yBAA0B,UAKnCD,SAASE,KAAO,SAASC,OAEjBA,MAAMF,+BACDA,wBAA0BE,MAAMF,6BAErCG,WAAaL,EAAE,uBAAuBM,SAASA,SACnDD,WAAWE,SAAS,YACpBF,WAAWG,OA8CXR,EAAE,wBAAwBS,GAAG,mBAxCKC,OAC1BC,iBAAmBX,EAAEU,EAAEE,QAEG,GAA1BD,iBAAiBE,OACjBb,EAAE,iBAAiBa,IAAI,KAAKC,QAC5Bd,EAAE,wBAAwBe,WAAW,UACrCf,EAAE,wBAAwBgB,OAC1BhB,EAAE,wBAAwBiB,OAAOC,MAAK,WAClClB,EAAEmB,MAAMC,IAAI,UAAW,SACvBpB,EAAEmB,MAAMJ,WAAW,aAEvBf,EAAE,kBAAkBe,WAAW,YAC/BV,WAAWW,QACsB,GAA1BL,iBAAiBE,QACxBb,EAAE,iBAAiBa,IAAI,KAAKC,QAC5Bd,EAAE,wBAAwBqB,KAAK,UAAU,GACzCrB,EAAE,wBAAwBiB,OAAOC,MAAK,WAClClB,EAAEmB,MAAMC,IAAI,UAAW,QACvBpB,EAAEmB,MAAME,KAAK,UAAU,MAE3BrB,EAAE,kBAAkBqB,KAAK,YAAY,GACrChB,WAAWG,WAoBnBR,EAAE,iBAAiBS,GAAG,mBAZIC,GAGO,GAFPV,EAAEU,EAAEE,QAENC,QAChBb,EAAE,wBAAwBa,IAAI,KAC9Bb,EAAE,wBAAwBQ,OAC1BR,EAAE,kBAAkBqB,KAAK,WAAY,YACrChB,WAAWG,WAOfW,KAAKjB,0BAA4BF,EAAE,WACnCA,EAAE,uBAAuBc,SAIjCb,SAASqB,iBAAmB,SAASlB,OACjCJ,EAAE,uBAAuBS,GAAG,UAAU,WAClCc,MAAMnB,MAAMoB,wBAITvB"}